(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7d15a60a"],{"3fcc":function(t,e,n){},"891c":function(t,e,n){"use strict";n("af7c")},a553:function(t,e,n){"use strict";n("3fcc")},af7c:function(t,e,n){},be35:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("contact-info")],1)},a=[],c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"contact-card"},[t._m(0),n("div",{staticClass:"add-contact__main main-info"},[n("div",{staticClass:"main-info__icon",style:{"background-color":t.selectedContact.options.iconColor}},[t._v(" "+t._s(t.contactAbbr(t.contactInfo.firstName.value,t.contactInfo.secondName.value)||"")+" ")]),n("form",{staticClass:"main-info__create-form",on:{submit:function(e){return e.preventDefault(),t.saveChanges(e)}}},[n("div",{staticClass:"input-fields"},t._l(t.contactTitlesLength,(function(e,i){return n("div",{key:i,staticClass:"input-fields__field-info",attrs:{idx:i}},[n("label",[t._v(t._s(t.capitalizeWord(t.contactData[i].title)))]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.contactInfo[t.contactKeys[i]].value,expression:"contactInfo[contactKeys[idx]].value"}],attrs:{type:"text"},domProps:{value:t.contactInfo[t.contactKeys[i]].value},on:{input:function(e){e.target.composing||t.$set(t.contactInfo[t.contactKeys[i]],"value",e.target.value)}}}),i>2?n("span",{staticClass:"material-icons input-fields__remove-btn",on:{click:function(e){return t.removeField(i)}}},[t._v("clear")]):t._e()])})),0),n("span",{staticClass:"input-fields__add-field-btn",on:{click:function(e){t.showOptions=!0}}},[t._v(" добавить поле ")]),n("div",{staticClass:"input-fields__buttons"},[n("button",{staticClass:"main-info__submit main-info__submit-active",attrs:{type:"submit"}},[t._v(" Сохранить ")]),n("button",{staticClass:"main-info__submit main-info__submit-active",on:{click:function(e){return e.preventDefault(),t.goBack(e)}}},[t._v(" Назад ")])])]),t.showOptions?n("create-field",{on:{"hide-options":function(e){t.showOptions=!1},"create-field":t.createField}}):t._e(),t.isFormValid?t._e():n("p",{staticClass:"contact-wrong-msg"},[t._v(" Пожалуйста, введите корректные данные ")])],1)])},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"contacts__header contact-info"},[n("span",{staticClass:"title"},[t._v("О контакте")])])}],s=n("5530"),l=(n("b64b"),n("4de4"),n("d81d"),n("159b"),n("2f62")),r=n("025e"),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-wrapper"},[n("div",{staticClass:"custom-fields input-fields"},[n("div",{staticClass:"custom-fields__inputs"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.title,expression:"title",modifiers:{trim:!0}}],class:{"input-wrong":!t.isFormValid&&!t.title},attrs:{type:"text",placeholder:"Название"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.value,expression:"value",modifiers:{trim:!0}}],class:{"input-wrong":!t.isFormValid&&!t.value},attrs:{type:"text",placeholder:"Значение"},domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),n("div",{staticClass:"custom-fields__buttons"},[n("button",{staticClass:"btn-cancel",on:{click:t.cancel}},[t._v("Отменить")]),n("button",{staticClass:"btn-add",on:{click:function(e){return e.preventDefault(),t.create(e)}}},[t._v("Добавить")])])])])},f=[],d=n("ade3"),m={props:["showOptions"],data:function(){return{title:"",value:"",isFormValid:!0}},methods:{cancel:function(){this.$emit("hide-options")},create:function(){var t=this;if(!this.title||!this.value)return this.isFormValid=!1,void setTimeout((function(){return t.isFormValid=!0}),2e3);var e="customFieldNr"+Date.now(),n=Object(d["a"])({},e,{title:this.title,value:this.value});this.$emit("create-field",n),this.title=this.value="",this.$emit("hide-options")}}},v=m,p=(n("a553"),n("2877")),h=Object(p["a"])(v,u,f,!1,null,"13cafb62",null),_=h.exports,b={name:"contact-info",mixins:[r["a"]],components:{CreateField:_},data:function(){return{contactInfo:{},showOptions:!1,isFormValid:!0}},beforeMount:function(){this.initState()},computed:Object(s["a"])(Object(s["a"])({},Object(l["b"])(["selectedContact","allContacts"])),{},{contactTitlesLength:function(){return Object.keys(this.contactInfo).length},contactKeys:function(){var t=Object.keys(this.selectedContact);return t.filter((function(t){return"options"!==t}))},contactData:function(){var t=this;return this.contactKeys.map((function(e){return t.selectedContact[e]}))}}),methods:Object(s["a"])(Object(s["a"])({},Object(l["c"])(["nullifyContact","updateContact","updateContacts"])),{},{initState:function(){var t=this;this.contactKeys.forEach((function(e){t.contactInfo[e]=t.selectedContact[e]}))},saveChanges:function(){for(var t={},e=0;e<this.contactTitlesLength;e++){var n=this.contactKeys[e],i=this.contactData[e].title,a=this.contactInfo[n].value;if(!a)return void(this.isFormValid=!1);this.isFormValid=!0,t[n]={title:i,value:a}}var c=this.selectedContact.options.idx;this.allContacts[c]=Object.assign(t,{options:this.selectedContact.options}),localStorage.setItem("contact-list",JSON.stringify(this.allContacts)),this.$router.push("/")},goBack:function(){var t=window.confirm("Вы уверены что хотите перейти назад?\nИзмененные данные не сохранятся");if(t){var e=JSON.parse(localStorage.getItem("contact-list"));this.updateContacts(e),this.nullifyContact(),this.$router.push("/")}},createField:function(t){this.contactInfo=Object.assign({},this.contactInfo,t),this.updateContact(this.contactInfo)},removeField:function(t){var e=window.confirm("Вы уверены что хотите удалить поле?");if(e){var n=this.contactKeys[t];delete this.contactInfo[n],delete this.selectedContact[n],this.contactInfo=Object.assign({},this.contactInfo),this.updateContact(this.contactInfo)}}})},C=b,g=(n("891c"),Object(p["a"])(C,c,o,!1,null,"5d0400f6",null)),w=g.exports,y={name:"contact-layout",components:{ContactInfo:w}},O=y,I=Object(p["a"])(O,i,a,!1,null,null,null);e["default"]=I.exports},d81d:function(t,e,n){"use strict";var i=n("23e7"),a=n("b727").map,c=n("1dde"),o=c("map");i({target:"Array",proto:!0,forced:!o},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-7d15a60a.296adcda.js.map